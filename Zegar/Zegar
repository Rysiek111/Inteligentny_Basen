#include <Wire.h>
#include <LiquidCrystal_PCF8574.h>
#include <DS3231.h>

#define LCD_ADDR  0x27 

LiquidCrystal_PCF8574 lcd(LCD_ADDR);
DS3231 clock1;

String getDateString() {
  bool century;
  
  String day = toStringWithLeadingZeros(clock1.getDate());
  String month = toStringWithLeadingZeros(clock1.getMonth(century));
  String year = String(clock1.getYear() + 2000);

  return day + "." + month + "." + year + "r.";
}

String getTimeString() {
  bool h12, pm;
  
  String hour = toStringWithLeadingZeros(clock1.getHour(h12, pm));
  String minute = toStringWithLeadingZeros(clock1.getMinute());
  String second = toStringWithLeadingZeros(clock1.getSecond());

  return hour + ":" + minute + ":" + second;
}

String toStringWithLeadingZeros(byte number) {
  String result = String(number);
  if(number < 10) {
    result = "0" + result;
  }
  return result;
}

void setup() {
  Wire.begin();
  lcd.begin(16, 2);
  lcd.setBacklight(true);
  
  lcd.print("Zagar");
  lcd.setCursor(0, 1);
  lcd.print("Arduino");
  delay(1000);
  lcd.clear();
}

void loop() {
  displayDateTime();
  delay(1000);
}

void displayDateTime() {
  lcd.clear();
  lcd.print(getDateString());
  lcd.setCursor(0, 1);
  lcd.print(getTimeString());
}
